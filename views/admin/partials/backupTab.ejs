<div id="backupTab" class="container admin-container">
  <h1 class="admin-section-title">Database Backups</h1>
  <form id="backupDirForm" class="mb-2 d-flex flex-wrap gap-2 align-items-end" method="POST" action="/admin/backups/set-dir">
    <label for="backupDirInput" class="form-label mb-0">Backup Folder:</label>
    <input id="backupDirInput" name="dir" type="text" class="form-control form-control-sm backup-dir-input" value="<%= settings.backup_dir || '' %>">
    <button id="browseDirBtn" type="button" class="btn btn-sm btn-outline-secondary">Browseâ€¦</button>
    <button type="submit" class="btn btn-sm btn-secondary">Save Location</button>
  </form>
  <div class="modal fade" id="dirBrowserModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Choose Folder</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div id="dirBrowserPath" class="small text-muted mb-2"></div>
          <ul class="list-group" id="dirBrowserList"></ul>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button id="dirBrowserSelect" type="button" class="btn btn-primary">Select</button>
        </div>
      </div>
    </div>
  </div>
  <div class="mb-2 d-flex flex-wrap gap-2 align-items-end">
    <button id="createBackupBtn" class="btn btn-sm btn-primary">Create Backup</button>
    <div class="d-flex gap-2">
      <select id="restoreFileSelect" class="form-select form-select-sm"></select>
      <button id="restoreSelectedBtn" class="btn btn-sm btn-outline-primary">Restore Selected</button>
    </div>
    <div class="d-flex gap-2">
      <input type="file" id="restoreFileInput" accept=".sql" class="form-control form-control-sm" />
      <button id="restoreUploadedBtn" type="button" class="btn btn-sm btn-outline-primary">Restore File</button>
    </div>
  </div>
  <div id="backupAlertContainer"></div>
  <div class="table-responsive">
    <table class="table table-sm" id="backupTable">
      <thead>
        <tr><th>File</th><th>Created</th><th>Size</th><th></th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
  <h2 class="mt-3">Backup Log</h2>
  <div class="table-responsive">
    <table class="table table-sm" id="backupLogTable">
      <thead>
        <tr><th>Time</th><th>Action</th><th>Result</th><th>Message</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</div>
<script defer src="/backupTab.js"></script>
